var articlesApp=function(){function e(e,t,n){let d=document.getElementById(e);d.addEventListener("submit",(function(e){e.preventDefault();let s=new FormData(d),r=`${window.location.origin}${t}`,a=new XMLHttpRequest;a.open(n,r),a.setRequestHeader("Content-Type","application/json; charset=UTF-8");let i={};s.forEach((function(e,t){i[t]=e})),a.send(JSON.stringify(i)),a.onload=function(){!0===JSON.parse(a.response).success?window.location.href="/":document.getElementById("formMsg").style.display="block"}}))}return{load:function(){let t=window.location.hash.split("-");switch(t[0]){case"#create":createArticle(),e("createArticle","/api/articles","POST");break;case"#view":viewArticle(t[1]);break;case"#edit":editArticle(t[1]);break;case"#delete":!function(e){let t=`${window.location.origin}/api/users/${e}`,n=new XMLHttpRequest;n.open("GET",t),n.setRequestHeader("Content-Type","application/json; charset=UTF-8"),n.send(),n.onload=function(){let e=document.getElementById("app"),t=JSON.parse(n.response),d="";d=`<div class="card bg-transparent border-danger text-danger bg-danger">\n      <div class="card-header bg-transparent border-danger">\n        <h2 class="h3 text-center">Your About to Delete a User</h2>\n      </div>\n      <div class="card-body text-center">\n        <div>\n          Are you sure you want to delete\n          <strong>${t.user.first_name} ${t.user.last_name}</strong>\n        </div>\n\n        <div>Username: <strong>${t.user.username}</strong></div>\n        <div>Email: <strong>${t.user.email}</strong></div>\n        <a onclick="usersApp.deleteUser('${t.user._id}');" class="btn btn-lg btn-danger text-white">\n        Yes delete ${t.user.username}\n      </a>\n      </div>\n    </div>`,e.innerHTML=d}}(t[1]);break;default:!function(){let e=`${window.location.origin}/api/articles`,t=new XMLHttpRequest;t.open("GET",e),t.setRequestHeader("Content-Type","application/json; charset=UTF-8"),t.send(),t.onload=function(){let e=document.getElementById("app"),n=JSON.parse(t.response).articles,d="",s="";for(let e=0;e<n.length;e++)s+=`<tr>\n        <td>\n          <a href="#view-${n[e]._id}">${n[e].title}, ${n[e].slug}</a>\n        </td>\n        <td>${users[e].body}</td>\n        <td>${users[e].description}</td>\n        <td>${users[e].keywords}</td>\n        <td>${users[e].published}</td>\n        <td>${users[e].created}</td>\n        <td>${users[e].modified}</td>\n      </tr>`;d=`<div class="card">\n      <div class="card-header clearfix">\n        <h2 class="h3 float-left">Articles</h2>\n        <div class="float-right">\n          <a href="#create" class="btn btn-primary">New Articles</a>\n        </div>\n      </div>\n      <div class="table-responsive">\n        <table class="table table-striped table-hover table-bordered">\n          <thead>\n            <tr>\n            <td>Title</td>\n            <td>Slug</td>\n            <td>Body</td>\n            <td>Description</td>\n            <td>Keywords</td>\n            <td>Published</td>\n            <td>Created</td>\n            <td>Modified</td>\n            </tr>\n          </thead>\n          <tbody>${s}</tbody>\n        </table>\n      </div>\n    </div>`,e.innerHTML=d}}()}},deleteArticle:function(e){deleteArticle(e)}}}();articlesApp.load(),window.addEventListener("hashchange",(function(){articlesApp.load()}));